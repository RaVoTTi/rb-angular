"use strict";(self.webpackChunkcustomer=self.webpackChunkcustomer||[]).push([[627],{4627:(w,Z,a)=>{a.r(Z),a.d(Z,{MyLearningModule:()=>m});var l=a(6895),L=a(5780),s=a(9653),C=a(5698),I=a(4629);const F=(0,s.PH)("[Learnings Resolver] Load All Learnings"),Y=(0,s.PH)("[Load Learnings Effect] All Learnings Loaded",(0,s.Ky)()),v=(0,I.H)({selectId:r=>r._id}),P=v.getInitialState({}),$=(0,s.Lq)(P,(0,s.on)(Y,(r,e)=>v.setAll(e.myLearnings,{...r,allMyLearningsLoaded:!0}))),{selectAll:S,selectEntities:x}=v.getSelectors(),M=(0,s.ZF)("myLearnings"),b=(0,s.P1)(M,S),H=(0,s.P1)(b,r=>r.length),R=(0,s.P1)(M,r=>r.allMyLearningsLoaded),z=(0,s.P1)(M,x);var t=a(4650),o=a(5467),k=a(5931),T=a(3629);const O=function(r){return["/app/mylearning/id/",r]},Q=function(r){return["/app/mylearning/myevaluation/",r]};class d{constructor(){this.RAW_URL=T.N.RAW_URL}static#t=this.\u0275fac=function(n){return new(n||d)};static#n=this.\u0275cmp=t.Xpm({type:d,selectors:[["frontend-card-learning"]],inputs:{learning:"learning",book:"book"},decls:13,vars:12,consts:[[1,"card-book"],[1,"card-container",3,"routerLink"],[1,"upper-container"],[1,"image",3,"src","alt"],[1,"line"],[1,"lower-container"],[1,"toolbar-price"],["title","Claim",1,"toolbar-button",3,"routerLink"],[1,"pi","pi-dollar"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"img",3),t.qZA(),t._UZ(4,"div",4),t.TgZ(5,"div",5)(6,"h2"),t._uU(7),t.qZA()()(),t.TgZ(8,"span",6),t._uU(9),t.ALo(10,"currency"),t.qZA(),t.TgZ(11,"button",7),t._UZ(12,"i",8),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("routerLink",t.VKq(8,O,i.learning._id)),t.xp6(2),t.Q6J("src",null==i.book?null:i.book.image,t.LSH)("alt",null==i.book?null:i.book.image),t.xp6(4),t.Oqu(null==i.book?null:i.book.name),t.xp6(2),t.hij(" ",t.lcZ(10,6,i.learning.price),""),t.xp6(2),t.Q6J("routerLink",t.VKq(10,Q,i.learning._id)))},dependencies:[o.rH,l.H9],encapsulation:2})}function G(r,e){if(1&r&&t._UZ(0,"frontend-card-learning",3),2&r){const n=e.$implicit,i=t.oxw(2);t.Q6J("learning",n)("book",i.book(n.book._id))}}function K(r,e){if(1&r&&(t.TgZ(0,"div",1),t.YNc(1,G,1,2,"frontend-card-learning",2),t.ALo(2,"async"),t.qZA()),2&r){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,1,n.allMyLearnings$))}}class h{constructor(e,n,i,u){this.router=e,this.alertService=n,this.route=i,this.store=u}ngOnInit(){this.route.queryParams.subscribe(e=>{const n=e.state;n&&("success"===n?this.alertService.fire({title:"Your purchased was succesful!!",text:"Enjoy your summarise..",icon:"success"},{urlConfi:"/app/mylearning",urlCancel:"/app/mylearning"}):"fail"===n&&this.alertService.fire({title:"The payment was unsuccesful!! ",text:"Check your card or try again",icon:"error"},{urlConfi:"/app/mylearning",urlCancel:"/app/mylearning"}))}),this.reload()}reload(){this.allMyLearnings$=this.store.pipe((0,s.Ys)(b)),this.countMyLearnings$=this.store.pipe((0,s.Ys)(H))}book(e){let n;return this.store.pipe((0,s.Ys)((0,L.NK)(e)),(0,C.q)(1)).subscribe(i=>n=i),n}static#t=this.\u0275fac=function(n){return new(n||h)(t.Y36(o.F0),t.Y36(k.c9),t.Y36(o.gz),t.Y36(s.yh))};static#n=this.\u0275cmp=t.Xpm({type:h,selectors:[["frontend-my-learning-list"]],decls:1,vars:1,consts:[["class","list-container",4,"ngIf"],[1,"list-container"],[3,"learning","book",4,"ngFor","ngForOf"],[3,"learning","book"]],template:function(n,i){1&n&&t.YNc(0,K,3,3,"div",0),2&n&&t.Q6J("ngIf",i.allMyLearnings$)},dependencies:[l.sg,l.O5,d,l.Ov],encapsulation:2})}class y{constructor(e,n,i,u){this.route=e,this.location=n,this.store=i,this.router=u,this.route.params.subscribe(A=>{var r;A.id?this.store.pipe((0,s.Ys)((r=A.id,(0,s.P1)(z,e=>e[r])))).subscribe(U=>{U?this.learning=U:this.router.navigate(["/app/mylearning"])}):this.router.navigate(["/app/mylearning"])})}evaluation(){this.router.navigate([`/app/mylearning/${this.learning._id}/myevaluation`])}back(){this.location.back()}static#t=this.\u0275fac=function(n){return new(n||y)(t.Y36(o.gz),t.Y36(l.Ye),t.Y36(s.yh),t.Y36(o.F0))};static#n=this.\u0275cmp=t.Xpm({type:y,selectors:[["frontend-my-learning-view"]],decls:10,vars:2,consts:[[1,"content-container"],[1,"learning-header"],["routerLink","/app/mylearning"],[1,"pi","pi-angle-left"],[1,"card-content"],[3,"innerHTML"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"i",3),t.TgZ(4,"span"),t._uU(5," Back to My Learning"),t.qZA()()(),t.TgZ(6,"div",4)(7,"h2"),t._uU(8),t.qZA(),t._UZ(9,"div",5),t.qZA()()),2&n&&(t.xp6(8),t.Oqu(i.learning.book.name),t.xp6(1),t.s9C("innerHTML",i.learning.book.content,t.oJD))},dependencies:[o.rH],encapsulation:2})}var N=a(529);class g{constructor(e){this.http=e,this.API_URL=T.N.API_URL}getMyLearnings(){return this.http.get(`${this.API_URL}/mylearning`)}patchMyLearning(e){return this.http.patch(`${this.API_URL}/mylearning/${e}`,{})}static#t=this.\u0275fac=function(n){return new(n||g)(t.LFG(N.eN))};static#n=this.\u0275prov=t.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}var B=a(8505),X=a(9300),j=a(590),E=a(8746);class c{constructor(e){this.store=e,this.loading=!1}resolve(e,n){return this.store.pipe((0,s.Ys)(R),(0,B.b)(i=>{!this.loading&&!i&&(this.loading=!0,this.store.dispatch(F()))}),(0,X.h)(i=>i),(0,j.P)(),(0,E.x)(()=>this.loading=!1))}static#t=this.\u0275fac=function(n){return new(n||c)(t.LFG(s.yh))};static#n=this.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac})}var f=a(2655),V=a(4351),W=a(4004);class p{constructor(e,n,i){this.store=e,this.actions$=n,this.myLearningService=i,this.loadMyLearnings$=(0,f.GW)(()=>this.actions$.pipe((0,f.l4)(F),(0,V.b)(u=>this.myLearningService.getMyLearnings()),(0,W.U)(({result:u})=>Y({myLearnings:u??[]}))))}static#t=this.\u0275fac=function(n){return new(n||p)(t.LFG(s.yh),t.LFG(f.eX),t.LFG(g))};static#n=this.\u0275prov=t.Yz7({token:p,factory:p.\u0275fac})}const D=[{path:"",component:h,resolve:{books:L.Kt,myLearnings:c}},{path:"id/:id",component:y,resolve:{books:L.Kt,orders:c}}];class m{static#t=this.\u0275fac=function(n){return new(n||m)};static#n=this.\u0275mod=t.oAB({type:m});static#e=this.\u0275inj=t.cJS({providers:[g,c],imports:[l.ez,s.Aw.forFeature("myLearnings",$),f.sQ.forFeature([p]),o.Bz.forChild(D),k.As]})}}}]);