"use strict";(self.webpackChunkcustomer=self.webpackChunkcustomer||[]).push([[627],{4627:(_,A,a)=>{a.r(A),a.d(A,{MyLearningModule:()=>L});var l=a(6895),m=a(3572),s=a(9653),C=a(5698),I=a(4629);const Y=(0,s.PH)("[Learnings Resolver] Load All Learnings"),F=(0,s.PH)("[Load Learnings Effect] All Learnings Loaded",(0,s.Ky)()),v=(0,I.H)({selectId:o=>o._id}),P=v.getInitialState({}),$=(0,s.Lq)(P,(0,s.on)(F,(o,e)=>v.setAll(e.myLearnings,{...o,allMyLearningsLoaded:!0}))),{selectAll:x,selectEntities:S}=v.getSelectors(),M=(0,s.ZF)("myLearnings"),b=(0,s.P1)(M,x),H=(0,s.P1)(b,o=>o.length),J=(0,s.P1)(M,o=>o.allMyLearningsLoaded),R=(0,s.P1)(M,S);var n=a(4650),r=a(5467),T=a(5931),Q=a(149),U=a(3629);const N=function(o){return["/app/mylearning/id/",o]},O=function(o){return["/app/mylearning/myevaluation/",o]};class d{constructor(){this.RAW_URL=U.N.RAW_URL}static#n=this.\u0275fac=function(t){return new(t||d)};static#t=this.\u0275cmp=n.Xpm({type:d,selectors:[["frontend-card-learning"]],inputs:{learning:"learning",book:"book"},decls:13,vars:12,consts:[[1,"card-book"],[1,"card-container",3,"routerLink"],[1,"upper-container"],[1,"image",3,"src","alt"],[1,"line"],[1,"lower-container"],[1,"toolbar-price"],["title","Claim",1,"toolbar-button",3,"routerLink"],[1,"pi","pi-dollar"]],template:function(t,i){1&t&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2),n._UZ(3,"img",3),n.qZA(),n._UZ(4,"div",4),n.TgZ(5,"div",5)(6,"h2"),n._uU(7),n.qZA()()(),n.TgZ(8,"span",6),n._uU(9),n.ALo(10,"currency"),n.qZA(),n.TgZ(11,"button",7),n._UZ(12,"i",8),n.qZA()()),2&t&&(n.xp6(1),n.Q6J("routerLink",n.VKq(8,N,i.learning._id)),n.xp6(2),n.Q6J("src",null==i.book?null:i.book.image,n.LSH)("alt",null==i.book?null:i.book.image),n.xp6(4),n.Oqu(null==i.book?null:i.book.name),n.xp6(2),n.hij(" ",n.lcZ(10,6,i.learning.price),""),n.xp6(2),n.Q6J("routerLink",n.VKq(10,O,i.learning._id)))},dependencies:[r.rH,l.H9],encapsulation:2})}function G(o,e){if(1&o&&n._UZ(0,"frontend-card-learning",4),2&o){const t=e.$implicit,i=n.oxw(2);n.Q6J("learning",t)("book",i.book(t.book._id))}}function K(o,e){if(1&o&&(n.TgZ(0,"div",2),n.YNc(1,G,1,2,"frontend-card-learning",3),n.ALo(2,"async"),n.qZA()),2&o){const t=n.oxw();n.xp6(1),n.Q6J("ngForOf",n.lcZ(2,1,t.allMyLearnings$))}}function B(o,e){1&o&&n._UZ(0,"frontend-nothing")}class h{constructor(e,t,i,u){this.router=e,this.alertService=t,this.route=i,this.store=u}ngOnInit(){this.route.queryParams.subscribe(e=>{const t=e.state;t&&("success"===t?this.alertService.fire({title:"Your purchased was succesful!!",text:"Enjoy your summarise..",icon:"success"},{urlConfi:"/app/mylearning",urlCancel:"/app/mylearning"}):"fail"===t&&this.alertService.fire({title:"The payment was unsuccesful!! ",text:"Check your card or try again",icon:"error"},{urlConfi:"/app/mylearning",urlCancel:"/app/mylearning"}))}),this.reload()}reload(){this.allMyLearnings$=this.store.pipe((0,s.Ys)(b)),this.countMyLearnings$=this.store.pipe((0,s.Ys)(H))}book(e){let t;return this.store.pipe((0,s.Ys)((0,m.NK)(e)),(0,C.q)(1)).subscribe(i=>t=i),t}static#n=this.\u0275fac=function(t){return new(t||h)(n.Y36(r.F0),n.Y36(T.c9),n.Y36(r.gz),n.Y36(s.yh))};static#t=this.\u0275cmp=n.Xpm({type:h,selectors:[["frontend-my-learning-list"]],decls:3,vars:4,consts:[["class","list-container",4,"ngIf"],[4,"ngIf"],[1,"list-container"],[3,"learning","book",4,"ngFor","ngForOf"],[3,"learning","book"]],template:function(t,i){1&t&&(n.YNc(0,K,3,3,"div",0),n.YNc(1,B,1,0,"frontend-nothing",1),n.ALo(2,"async")),2&t&&(n.Q6J("ngIf",i.allMyLearnings$),n.xp6(1),n.Q6J("ngIf",0===n.lcZ(2,2,i.countMyLearnings$)))},dependencies:[l.sg,l.O5,Q.v,d,l.Ov],encapsulation:2})}class y{constructor(e,t,i,u){this.route=e,this.location=t,this.store=i,this.router=u,this.route.params.subscribe(Z=>{var o;Z.id?this.store.pipe((0,s.Ys)((o=Z.id,(0,s.P1)(R,e=>e[o])))).subscribe(k=>{k?this.learning=k:this.router.navigate(["/app/mylearning"])}):this.router.navigate(["/app/mylearning"])})}evaluation(){this.router.navigate([`/app/mylearning/${this.learning._id}/myevaluation`])}back(){this.location.back()}static#n=this.\u0275fac=function(t){return new(t||y)(n.Y36(r.gz),n.Y36(l.Ye),n.Y36(s.yh),n.Y36(r.F0))};static#t=this.\u0275cmp=n.Xpm({type:y,selectors:[["frontend-my-learning-view"]],decls:10,vars:2,consts:[[1,"content-container"],[1,"learning-header"],["routerLink","/app/mylearning"],[1,"pi","pi-angle-left"],[1,"card-content"],[3,"innerHTML"]],template:function(t,i){1&t&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2),n._UZ(3,"i",3),n.TgZ(4,"span"),n._uU(5," Back to My Learning"),n.qZA()()(),n.TgZ(6,"div",4)(7,"h2"),n._uU(8),n.qZA(),n._UZ(9,"div",5),n.qZA()()),2&t&&(n.xp6(8),n.Oqu(i.learning.book.name),n.xp6(1),n.s9C("innerHTML",i.learning.book.content,n.oJD))},dependencies:[r.rH],encapsulation:2})}var X=a(529);class g{constructor(e){this.http=e,this.API_URL=U.N.API_URL}getMyLearnings(){return this.http.get(`${this.API_URL}/mylearning`)}patchMyLearning(e){return this.http.patch(`${this.API_URL}/mylearning/${e}`,{})}static#n=this.\u0275fac=function(t){return new(t||g)(n.LFG(X.eN))};static#t=this.\u0275prov=n.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}var j=a(8505),E=a(9300),V=a(590),W=a(8746);class c{constructor(e){this.store=e,this.loading=!1}resolve(e,t){return this.store.pipe((0,s.Ys)(J),(0,j.b)(i=>{!this.loading&&!i&&(this.loading=!0,this.store.dispatch(Y()))}),(0,E.h)(i=>i),(0,V.P)(),(0,W.x)(()=>this.loading=!1))}static#n=this.\u0275fac=function(t){return new(t||c)(n.LFG(s.yh))};static#t=this.\u0275prov=n.Yz7({token:c,factory:c.\u0275fac})}var f=a(2655),D=a(4351),w=a(4004);class p{constructor(e,t,i){this.store=e,this.actions$=t,this.myLearningService=i,this.loadMyLearnings$=(0,f.GW)(()=>this.actions$.pipe((0,f.l4)(Y),(0,D.b)(u=>this.myLearningService.getMyLearnings()),(0,w.U)(({result:u})=>F({myLearnings:u??[]}))))}static#n=this.\u0275fac=function(t){return new(t||p)(n.LFG(s.yh),n.LFG(f.eX),n.LFG(g))};static#t=this.\u0275prov=n.Yz7({token:p,factory:p.\u0275fac})}const q=[{path:"",component:h,resolve:{books:m.Kt,myLearnings:c}},{path:"id/:id",component:y,resolve:{books:m.Kt,orders:c}}];class L{static#n=this.\u0275fac=function(t){return new(t||L)};static#t=this.\u0275mod=n.oAB({type:L});static#e=this.\u0275inj=n.cJS({providers:[g,c],imports:[l.ez,s.Aw.forFeature("myLearnings",$),f.sQ.forFeature([p]),r.Bz.forChild(q),T.As]})}}}]);