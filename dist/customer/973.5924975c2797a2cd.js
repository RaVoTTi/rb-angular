"use strict";(self.webpackChunkcustomer=self.webpackChunkcustomer||[]).push([[973],{6973:(w,d,i)=>{i.r(d),i.d(d,{AuthUserModule:()=>c});var h=i(6895),p=i(5467),s=i(433),g=i(8505),f=i(9884),t=i(4650),v=i(9653),m=i(5931);class u{constructor(r){this.elementRef=r,this._msg="This field is required",this._color="red",this.element=r}set errorMsg(r){r?(this._msg=r,this.setMsg(),this.element.nativeElement.classList.remove("hidden")):this.element.nativeElement.classList.add("hidden")}ngOnInit(){this.setClass(),this.setColor(),this.element.nativeElement.classList.add("hidden")}setMsg(){this.element.nativeElement.innerText=this._msg}setColor(){this.element.nativeElement.style.color=this._color}setClass(){this.element.nativeElement.style.fontSize=".8rem"}static#t=this.\u0275fac=function(e){return new(e||u)(t.Y36(t.SBq))};static#e=this.\u0275dir=t.lG2({type:u,selectors:[["","errorMsg",""]],inputs:{errorMsg:"errorMsg"}})}function Z(l,r){if(1&l){const e=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"i"),t._uU(3,"\u{1f3f9}"),t.qZA(),t._uU(4," Enter your details below to continue "),t.qZA(),t.TgZ(5,"form",8)(6,"div",9)(7,"label",10),t._uU(8," Email"),t.qZA(),t._UZ(9,"input",11)(10,"small",12),t.qZA(),t.TgZ(11,"div",9)(12,"label",10),t._uU(13," Password"),t.qZA(),t._UZ(14,"input",13)(15,"small",12),t.qZA(),t.TgZ(16,"div",14)(17,"div",15),t._UZ(18,"input",16),t.TgZ(19,"label",17),t._uU(20," Remember Me "),t.qZA()(),t.TgZ(21,"a",18),t._uU(22," Forgot Password? "),t.qZA()(),t.TgZ(23,"div",19)(24,"div",20)(25,"button",21),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onSubmit())}),t._UZ(26,"span",22),t._uU(27," Start Now "),t.qZA()()(),t.TgZ(28,"div",23)(29,"span"),t._uU(30,"Don't have account"),t.qZA(),t.TgZ(31,"a",24),t._uU(32," Create account "),t.qZA()()()()}if(2&l){const e=t.oxw();t.xp6(5),t.Q6J("formGroup",e.loginForm),t.xp6(5),t.Q6J("errorMsg",e.errorMsg("email")),t.xp6(5),t.Q6J("errorMsg",e.errorMsg("password")),t.xp6(10),t.Q6J("disabled",e.loginForm.invalid||e.loginForm.disabled)}}function U(l,r){if(1&l){const e=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"i"),t._uU(3,"\u{1f3f9}"),t.qZA(),t._uU(4," Fill the gaps and discover a great amount of new oppotunities! "),t.qZA(),t.TgZ(5,"form",25)(6,"div",9)(7,"label",10),t._uU(8," Name"),t.qZA(),t._UZ(9,"input",26)(10,"small",12),t.qZA(),t.TgZ(11,"div",9)(12,"label",10),t._uU(13," LastName"),t.qZA(),t._UZ(14,"input",27)(15,"small",12),t.qZA(),t.TgZ(16,"div",9)(17,"label",10),t._uU(18," Email"),t.qZA(),t._UZ(19,"input",11)(20,"small",12),t.qZA(),t.TgZ(21,"div",9)(22,"label",10),t._uU(23," Phone"),t.qZA(),t._UZ(24,"input",28)(25,"small",12),t.qZA(),t.TgZ(26,"div",9)(27,"label",10),t._uU(28," Password"),t.qZA(),t._UZ(29,"input",29)(30,"small",12),t.qZA(),t.TgZ(31,"div",9)(32,"label",10),t._uU(33,"Confirm Password"),t.qZA(),t._UZ(34,"input",30)(35,"small",12),t.qZA(),t.TgZ(36,"div",31),t._UZ(37,"input",32),t.TgZ(38,"label",17),t._uU(39," Accept "),t.TgZ(40,"a",33),t._uU(41,"Terms & Conditions"),t.qZA()()(),t.TgZ(42,"div",19)(43,"div",20)(44,"button",21),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.onSubmit())}),t._UZ(45,"span",22),t._uU(46," Create Account "),t.qZA()()(),t.TgZ(47,"div",34)(48,"div",20)(49,"span",35),t._uU(50,"Already have an account?"),t.qZA(),t.TgZ(51,"a",36)(52,"span",37),t._uU(53,"Login Now "),t.qZA()()()()()()}if(2&l){const e=t.oxw();t.xp6(5),t.Q6J("formGroup",e.signUpForm),t.xp6(5),t.Q6J("errorMsg",e.errorMsg("name")),t.xp6(5),t.Q6J("errorMsg",e.errorMsg("lastName")),t.xp6(5),t.Q6J("errorMsg",e.errorMsg("email")),t.xp6(5),t.Q6J("errorMsg",e.errorMsg("phone")),t.xp6(5),t.Q6J("errorMsg",e.errorMsg("password")),t.xp6(5),t.Q6J("errorMsg",e.errorMsg("password2")),t.xp6(9),t.Q6J("disabled",e.signUpForm.invalid||e.signUpForm.disabled)}}class a{constructor(r,e,o,n,A,x,_){this.router=r,this.formBuilder=e,this.authBaseService=o,this.store=n,this.alert=A,this.errorH=x,this.vs=_,this.login=!0,this.login=!this.router.url.includes("signup")}ngOnInit(){this._initForm()}onSubmit(){this.login?(this.loginForm.disable(),this._login()):(this.signUpForm.disable(),this._postSignUp())}_login(){if(this.loginForm.invalid)return void this.loginForm.markAllAsTouched();const{email:r,password:e}=this.loginForm.value;this.authBaseService.postLogin({email:r,password:e}).pipe((0,g.b)(({token:o})=>{o&&(this.store.dispatch(f.uQ.login({token:o})),this.router.navigate(["/app"]))})).subscribe({error:({error:o})=>{this.loginForm.enable(),this.alert.fire({icon:"error",text:o?.msg?o?.msg:"Something happened"})}})}_postSignUp(){this.signUpForm.invalid?this.signUpForm.markAllAsTouched():this.authBaseService.postSignUp(this.signUpForm.value).pipe((0,g.b)(r=>{r.ok&&this.alert.fire({icon:"success",text:"User Created succesful"})})).subscribe({error:({error:r})=>{this.signUpForm.enable(),this.alert.fire({icon:"error",text:r?.msg?r?.msg:"Something happened"})}})}_initForm(){this.login?this.loginForm=this.formBuilder.group({email:["",[s.kI.required,this.vs.validatePat("emailPat")]],password:["",[s.kI.required,this.vs.validatePat("passwordPat")]]}):this.signUpForm=this.formBuilder.group({name:["",[s.kI.required,this.vs.validatePat("namePat")]],lastName:["",[s.kI.required,this.vs.validatePat("namePat")]],email:["",[s.kI.required,this.vs.validatePat("emailPat")]],phone:["",[s.kI.required,this.vs.validatePat("phone")]],password:["",[s.kI.required,this.vs.validatePat("passwordPat")]],password2:["",[s.kI.required]],terms:[!1,[s.kI.required,s.kI.requiredTrue]]},{validators:[this.vs.passwordMismatch("password","password2")]})}errorMsg(r){return this.errorH.errorMsg(this.login?this.loginForm.controls[r]:this.signUpForm.controls[r])}static#t=this.\u0275fac=function(e){return new(e||a)(t.Y36(p.F0),t.Y36(s.qu),t.Y36(f.ri),t.Y36(v.yh),t.Y36(m.c9),t.Y36(m.q_),t.Y36(m.S9))};static#e=this.\u0275cmp=t.Xpm({type:a,selectors:[["frontend-auth-view"]],decls:7,vars:2,consts:[[1,"auth-container"],[1,"auth-in"],[1,"auth-logo"],["src","assets/img/logo-header.svg","alt","","routerLink","/app/books",1,"logo"],["class","auth-card",4,"ngIf","ngIfElse"],["signup",""],[1,"auth-card"],[1,"auth-alert"],["autocomplete","off",1,"",3,"formGroup"],[1,"input-label"],[1,"label"],["placeholder","robin@boook.com","formControlName","email","type","text",1,"form-control"],[3,"errorMsg"],["type","password","placeholder","*********","formControlName","password",1,"form-control"],[1,"d-flex","justify-content-between","m-2"],[1,"form-check"],["type","checkbox","value","","id","flexCheckDefault",1,"form-check-input"],["for","flexCheckDefault",1,"form-check-label"],["routerLink","/app/terms"],[1,"row","mb-3","mt-3"],[1,"col-md-12","col-sm-12","col-xs-12","text-center"],["type","submit",1,"btn","btn-primary","btn-block",3,"disabled","click"],[1,"spinner-border","spinner-border-sm","mr-1"],[1,"d-flex","justify-content-evenly"],["routerLink","/auth/signup"],["autocomplete","off",3,"formGroup"],["placeholder","Robin","formControlName","name","type","text",1,"form-control"],["type","text","placeholder","Boook","formControlName","lastName",1,"form-control"],["type","number","placeholder","(111) 111-1111","formControlName","phone",1,"form-control"],["type","password","placeholder","********","formControlName","password",1,"form-control"],["type","password","placeholder","********","formControlName","password2",1,"form-control"],[1,"form-check","m-2"],["type","checkbox","formControlName","terms","value","","id","flexCheckDefault",1,"form-check-input"],["href",""],[1,"row","mb-5"],[1,"text-xs","text-muted","me-3"],["routerLink","/auth"],[1,"text-xs","text-primary","fw-bold"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"a",2),t._UZ(3,"img",3),t.qZA(),t.YNc(4,Z,33,4,"div",4),t.qZA()(),t.YNc(5,U,54,8,"ng-template",null,5,t.W1O)),2&e){const n=t.MAs(6);t.xp6(4),t.Q6J("ngIf",o.loginForm)("ngIfElse",n)}},dependencies:[h.O5,p.rH,u,s._Y,s.Fj,s.wV,s.Wl,s.JJ,s.JL,s.sg,s.u],encapsulation:2})}const b=[{path:"",component:a},{path:"signup",component:a}];class c{static#t=this.\u0275fac=function(e){return new(e||c)};static#e=this.\u0275mod=t.oAB({type:c});static#r=this.\u0275inj=t.cJS({imports:[h.ez,p.Bz.forChild(b),m.As,s.u5,s.UX]})}}}]);